# =============================================================================
# Samba Configuration - Intentionally Weak for Testing
# =============================================================================

[global]
    workgroup = TESTLAB
    server string = CPTC11 File Server
    netbios name = FILESERVER

    # Security settings (intentionally weak)
    security = user
    map to guest = Bad User
    guest account = nobody

    # Null session support (for enumeration testing)
    restrict anonymous = 0
    null passwords = yes

    # SMB protocol settings
    server min protocol = NT1
    client min protocol = NT1
    ntlm auth = yes

    # Disable signing (weak)
    server signing = disabled
    client signing = disabled

    # Logging
    log file = /var/log/samba/log.%m
    max log size = 1000
    log level = 2

    # DNS and WINS
    dns proxy = no
    wins support = no

    # Disable printer sharing
    load printers = no
    printing = bsd
    printcap name = /dev/null
    disable spoolss = yes

    # Performance
    socket options = TCP_NODELAY IPTOS_LOWDELAY SO_RCVBUF=65536 SO_SNDBUF=65536

# =============================================================================
# Share Definitions
# =============================================================================

# IPC$ - Required for null sessions
[IPC$]
    comment = IPC Service
    path = /tmp
    guest ok = yes
    browseable = no

# Public share - Anonymous read access
[public]
    comment = Public Files
    path = /share/public
    browseable = yes
    read only = yes
    guest ok = yes
    public = yes

# Private share - Authenticated users only
[private]
    comment = Private Files
    path = /share/private
    browseable = yes
    read only = no
    guest ok = no
    valid users = smbuser, admin
    write list = admin

# Backup share
[backup]
    comment = Backup Files
    path = /share/backup
    browseable = yes
    read only = no
    guest ok = no
    valid users = backup, admin
    write list = backup, admin

# IT share
[it]
    comment = IT Department
    path = /share/it
    browseable = yes
    read only = no
    guest ok = no
    valid users = admin, smbuser
    write list = admin

# HR share
[hr]
    comment = Human Resources
    path = /share/hr
    browseable = yes
    read only = no
    guest ok = no
    valid users = admin, smbuser

# Finance share
[finance]
    comment = Finance Department
    path = /share/finance
    browseable = yes
    read only = no
    guest ok = no
    valid users = admin, smbuser

# Admin share (hidden)
[admin$]
    comment = Admin Share
    path = /share/admin
    browseable = no
    read only = no
    guest ok = no
    valid users = admin

# C$ equivalent (hidden)
[C$]
    comment = Default Share
    path = /
    browseable = no
    read only = yes
    guest ok = no
    valid users = admin
